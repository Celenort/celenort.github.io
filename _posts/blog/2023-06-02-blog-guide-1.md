---
title: "Github Blog 리뉴얼 도전기"
permalink: /blog/guide-tutorial/
excerpt: "MMistakes 테마를 100% 커스터마이징 해보자"
last_modified_at: 2023-06-03T08:57:00+09:00
toc: true
toc_sticky: true
sidebar:
  nav: "blog"
author_profile: false
show_date: true
---

글을 작성하기에 앞서, 이 글과 앞으로 작성하게 될 글의 내용은 Minimal Mistakes Theme의 가이드 글, 및 `/docs/_docs` 에 위치해 있는 [Quick-Start Guide](https://mmistakes.github.io/minimal-mistakes/docs/quick-start-guide/) 를 한글로 번역, 제 상황에 맞게 적절한 내용을 추가, 삭제한 것임을 알립니다.
{: .notice--info}

## Jekyll, Ruby, gem, liquid ... 

Github Pages를 이용하여 Blog를 직접 만들어보았거나, 그럴 예정인 사람들은 위 단어들을 자주 접하게 될 것 같습니다. 개념에 대해 먼저 정리를 하고 넘어가 봅시다.

1. Github Pages
   
   - Github Pages를 이용하면 무료로 정적 웹사이트를 만들 수 있습니다. 단순히 글과 그림들로 구성된 '정보'를 보여주는 사이트가 '정적' (Static) 사이트입니다. 우리가 들어가는 사이트들 중에서 정적인 것들은 일반적인 블로그나 무언가 설명하기 위해 만들어진 docs, wiki 사이트 등이 있겠습니다. 이외에도 은행 결제나 주식 거래 등 서버와 정보를 주고받으며 상호작용이 가능한 경우 정적인 사이트가 아닌 동적(Dynamic) 사이트라고 볼 수 있습니다. 블로그나 포트폴리오와 같은 사이트를 만드는 목적이므로 굳이 비싼 호스팅을 이용하지 않고 Github Pages를 이용하여 간단히, 그리고 후술할 '버젼 관리'가 되는 사이트를 만들어 봅시다.
   - Github Page가 갖는 가장 큰 장점은 개인이 만든 Github Pages 자체도 하나의 Github Repository라는 점입니다. 본 블로그의 깃헙 리포지토리는 [다음](https://github.com/Celenort/celenort.github.io)와 같습니다. 일반적으로 도메인을 건드리지 않으면 개인이 만들게 될 github pages의 주소는 `https://<username>.github.io` 가 되며, 해당 블로그에 대한 github repository는 `https://github.com/<username>/<username>.github.io`가 됩니다. 블로그 자체가 리포지토리에 들어있다는 것은 해당 remote 저장소를 컴퓨터의 git에 동기화하여 사용하고, 타인과 공유하고, 버전 관리를 할 수 있다는 점입니다. Git - Github로 이어지는 모든 장점들을 상속받았다고도 할 수 있습니다.
   - Github Pages를 만드는 방법은 어렵지 않습니다. 먼저 Github 에 계정이 없다면 계정을 만들어 줍니다. 로그인 후 리포지토리 생성을 할 수 있는데요, 이 때 github pages라는 선택지를 클릭한 다음 제작해준다면 이 리포지토리는 자동으로 사이트를 생성하도록 동작됩니다. 저는 이미 블로그가 만들어져있기에 이 부분은 생략하겠습니다. 다른 사이트에 훨씬 자세히 잘 설명 되어 있어요.

2. Jekyll

   - Jekyll은 SWG(Static WebPage Generator)의 일종으로, 정적 사이트를 만드는 일종의 생성기, 혹은 프레임워크입니다. 요새 많이 사용한다는 React 같은 것으로도 Github Page를 꾸밀 수 있다는 말을 들었는데 제가 안사용해보기도 하였고, 무엇보다 Github 자체에서 Jekyll이라는 SWG를 공식적으로 지원하기에 이를 사용하여 제작해 보았습니다. Jekyll이 마음에 들지 않거나, 다른 프레임워크를 사용해보고 싶은 힙스터라면 [HUGO](https://gohugo.io/)라는 친구로도 많이들 만든다고 하니 시도해 보시기 바랍니다.
   - Jekyll만 있다고 해서 뚝딱 홈페이지가 만들어지는 것이 아니기에, 여기에 씌워줄 테마를 골라야겠죠. 테마는 직접 만들 수도 있지만 너무 귀찮기 때문에 보통 자신에게 맞는 테마를 다운하고 이를 커스텀하곤 합니다. 저는 가장 심플하면서도 지원되는 기능들이 많은 [Minimal Mistakes](https://mmistakes.github.io/minimal-mistakes/)를 이용하였습니다. 이 글과 시리즈 자체가 이 테마를 커스텀하는 방법이기도 하고요. 다양한 테마들은 [jekyllthemes.io](https://jekyllthemes.io/free)라는 사이트에서 찾아보시면 될 것 같습니다. 저도 글을 쓰면서 다른 테마들도 둘러봤는데요, 블로그로 쓰기에 좋을것 같아보이는 MMistakes보다 더 괜찮아보이는 테마들도 눈에 들어오네요. 그래도 저는 이 테마를 1년동안 써서 어느정도 익숙해 진데다, 개인 포트폴리오와 블로그가 짬뽕처럼 섞여있는 것 같은 이 느낌이 괜찮아서 계속 이 테마를 사용할겁니다.

3. Ruby
   
   - Ruby는 프로그래밍 언어입니다. jekyll이 ruby로 이루어져 있습니다. 그렇기에 jekyll을 사용하려면 (더 정확히는 로컬 블로그를 구동시키려면) Ruby를 사용하고 있는 데스크톱에 다운받아야 합니다. 
   - Ruby에는 gem이라는 플러그인? 확장의 개념이 있는데, 뭐 플러그인이라기 보다는 우리가 리눅스에서 필요한 패키지들을 다운받듯이 루비에서는 필요한 젬들을 다운받아서 사용하는 식인 것 같습니다. 
   - 리눅스에서 패키지들을 `apt-get` 명령어로 다운받는다면 Ruby에서는 `bundle`과 `gem`으로 다운받는 것 같네요. 자세한 명령어는 후술하겠습니다.

4. Liquid

   - Liquid라는 문법을 알고 계시나요? 깃헙 블로그를 만들면서 느꼈던 가장 큰 진입장벽중 하나가 이 Liquid 문법인데요. 이 Liquid를 프로그래밍 언어라고 하기엔 뭐하고 공식 사이트에 따르면 **Templete Language** 라고 합니다. `{ % 어쩌구저쩌구 % }`의 형식이 보이면 다 Liquid 문법이라고 보시면 됩니다. 저도 공식 사이트나 위키에 들어가서 배운건 하나도 없는데 여기 있는 템플릿들을 보면서 대충 이해하다보니 그럭저럭 쓸수 있게 됐습니다. 나름 if / for / while 과 유사한 문법도 지원하고 (시인성은 개떡같습니다.) YAML Front Matter라고 마크다운 파일의 상단에 일종의 config를 적어두면 Liquid 형식의 페이지 템플릿에 해당 설정에 반응하여 바뀌는 식입니다. 예를 들어 특정 페이지에는 toc가 적용되지 않게 하고싶다던지 할 때 위쪽에 `toc: false`를 적어두면 적용이 안되겠죠.


## 로컬 - 기반 환경 설치

**주의사항:** 상술한 부분은 Github Pages가 아니라 로컬 블로그를 만들기 위한 가이드이므로 단순히 github pages를 이용하여 원격 블로그만을 만들고 싶은 분들은 위 가이드를 참고하지 않아도 됩니다. 
{: .notice--warning}

로컬에서 설치하기 위해 필요한 ruby와 `bundle`, `jekyll` gem을 설치해 주는 부분입니다. 로컬에서 구동할 일이 없다면 [다음](#원격---mmistakes-테마-설치하기)으로 이동하세요.

Jekyll 이 로컬에서 구동되기 위한 Ruby를 설치합니다.

1. 루비 다운로드

   루비 다운로드 [페이지](https://www.ruby-lang.org/en/downloads/)에서 다운로드 받아줍니다. 최신 스테이블 버젼에 Devkit 포함된 버젼으로 설치했습니다.

   ```terminal
   ruby -v
   ```

   자신이 설치한 버전이 보이면 성공입니다.

2. Jekyll 설치

   shell에 다음과 같이 실행해줍니다.
   ```terminal
   gem install jekyll bundler
   ```

   ```terminal
   jekyll -v
   ```
   를 타이핑 했을 때 제대로 버젼이 뜬다면 제대로 설치되었습니다.

## 로컬 - MMistakes 테마 설치

Jekyll v3.7+ 버전을 사용하고, 로컬로 호스팅한다면 Ruby gem의 명령어로 간편히 MMistakes 를 비롯한 테마들을 설치할 수 있습니다.

로컬 블로그를 만들고, 이를 실행하기 위해서는 ruby가 설치된 환경에서 gem을 직접 실행해야 합니다.

**주의:** 본 테마는 [jekyll-include-cache](https://github.com/benbalter/jekyll-include-cache) 플러그인을 사용하므로, `Gemfile`에서 해당 플러그인을 추가해 주어야 하며, `_config.yml`의 `plugins` 에도 추가해 주어야 합니다. 이를 무시하면 `Unknown tag 'include_cached'` 오류가 뜰 수 있습니다.
{: .notice--danger}

### Gem-기반 설치방법

gem 명령어로 따로 다운받지 않고 명령어만으로 설치가 가능합니다.

먼저 Gem 기반의 Jekyll 테마의 경우 `assets`, `_layouts`, `_includes`,`_sass` 와 같은 디렉토리들이 테마의 gem 파일안에 저장되어 있고, 이들은 즉시 보이지 않습니다. 이러한 파일들을 손대지 않고도 편하게 테마를 설치/업데이트 할 수 있습니다. _(직역되었습니다)_

먼저 Gem Based Theme을 설치해 봅시다. 

1. jekyll 디렉토리의 `Gemfile`를 텍스트 에디터로 열어 다음과 같이 만들어 줍니다.

   ```ruby
   source "https://rubygems.org"
   # use local theme gem for testing
   
   gem "jekyll-include-cache", group: :jekyll_plugins
   gem "minimal-mistakes-jekyll", path: "../"
   group :jekyll_plugins do
      gem 'jekyll-algolia', '~> 1.0'
   end
   gem "wdm", "~> 0.1.0" if Gem.win_platform?
   gem "webrick"
   ```

3. [Bundler](https://bundler.io/) 명령어를 이용해 최신 버젼의 gem파일들을 다운받고 필요한 것을 추가로 설치해 줍니다(sudo apt-get update를 먼저 실행하는 느낌):

   ```terminal
   bundle
   ```

3. Jekyll의 `_config.yml` 에서 `theme` 부분을 다음과 같이 수정합니다:

   ```yaml
   theme: minimal-mistakes-jekyll
   ```

4. 테마를 업데이트 하기 위해 `bundle update`를 실행합니다.

### 원격 테마로 설치하는 방법

앞선 방법과 비슷하지만, 보통 Mmistakes 원래 사이트에서 포크된  Github Repository를 git에 clone하여 사용하므로, 한번 설정 이후 `Gemfile`을 따로 건들지 않아도 됩니다. _(솔직히 무슨말인지 정확히 이해가 안감)_ 

1. 먼저, GemFile을 다음과 같이 바꾸어 줍니다:

   ```ruby
   source "https://rubygems.org"

   gem "github-pages", group: :jekyll_plugins
   gem "jekyll-include-cache", group: :jekyll_plugins
   ```

2. `_config.yml` 에서 `jekyll-include-cache` 를 `plugins` 부분의 아래에 눈치껏 추가합니다.

3. [Bundler](https://bundler.io/) 명령어를 이용해 최신 버젼의 gem파일들을 다운받고 필요한 것을 추가로 설치해 줍니다(sudo apt-get update를 먼저 실행하는 느낌):

   ```terminal
   bundle
   ```

4. `_config.yml`의 위쪽에 있는 `remote_theme:` 부분을 `remote_theme: "mmistakes/minimal-mistakes@4.24.0"` 로 바꾸고 활성화해줍니다. 다른  `theme:` 이나 `remote_theme:` 는 `#`로 주석 처리합니다.

5. 테마를 업데이트 하기 위해 `bundle update`를 실행합니다.

특정 브랜치나 특정 버전을 사용할 수도 있다고 합니다. [tag](https://github.com/mmistakes/minimal-mistakes/tags), (e.g., `mmistakes/minimal-mistakes@4.9.0` or `mmistakes/minimal-mistakes@bbf3cbc5fd64a3e1885f3f99eb90ba92af84063d`)

**Remote Theme 스타터 예제**  [Minimal Mistakes remote theme starter](https://github.com/mmistakes/mm-github-pages-starter/generate) 를 이용해서 로컬 블로그를 Github에 올라가 있는 Remote Theme으로 실행해볼 수 있습니다. 직접 수정한 Theme을 자기가 Github에 올리고 이를 사용하는 식으로도 활용할 수 있을 것 같습니다.
{: .notice--info}

**ProTip:** Miniaml Mistakes Github을 포크하여 사용하는 경우 `/docs` 와 `/test` 디렉토리를 삭제해도 됩니다. 테스트, 예제용 파일들이 들어있는데, 필요하면 끌어와서 어떻게 작동하는지 분석해봐도 됩니다. 실제 사용할 때는 렌더링 되지 않는 부분이므로 필요 없으면 삭제하면 됩니다.
{: .notice--info}

## 원격 - MMistakes 테마 설치

원격으로 테마를 설치하기 위해서는 Github Pages가 활성화었고, Jekyll로 렌더링 됨이 설정된 개인 디렉토리에 MMistakes 테마를 Fork 하면 됩니다.

1. [Minimal Mistakes 테마](https://github.com/mmistakes/minimal-mistakes/fork)를 포크합니다. 

   Repository의 이름을 **USERNAME.github.io** 으로 변경해 줍니다. **USERNAME**에는 당연히 자신의 github 계정 유저이름을 넣어줍니다.

   ![fork Minimal Mistakes](/assets/images/mm-theme-fork-repo.png)

   _(직역되었습니다)_ 여러개의 Jekyll 사이트를 동일한 계정으로 운영하는 경우, 같은 github username을 입력하는 대신에 다른 repo로 이름을 바꾸고 `gh-pages`라는 branch에 파일을 넣어주어야 합니다. 더 자세한 내용은 [GitHub's documentation](https://help.github.com/articles/user-organization-and-project-pages/)을 참고하세요.
   {: .notice--info}

   ![creating a new branch on GitHub](/assets/images/mm-gh-pages.gif)

2. 테마를 수정하거나 로컬에서 시행하고 싶다면 다음 과정을 따릅니다.

   - github 개인 원격 리포지토리를 로컬 git과 연동시켜 `_sass`, `_layouts`와 같은 부분들을 수정하여 리모트로 올려준다면 해당 수정사항이 반영됩니다 [^structure].

   - 여러 가지 문제로 (보통은 git에서 리모트로 푸시하면 해당 사항이 적용될 때까지 오랜 시간이 걸려 실시간으로 확인하기가 어려움, 확인해보진 않았지만 한시간에 github Action이 10번만 실행된다는 말이 있습니다. 즉 10번 이상 푸시 하면 그 이후의 푸시들은 1시간 정도를 기다려야 적용될 수도 있습니다.) 실행은 github pages로 되지만, 로컬에서 프리뷰하기 위해 로컬 블로그도 구동하고싶은 경우가 있는데, 이 경우에는 다음을 따릅니다.
      1. [앞에서](#로컬---기반-환경-설치) 다룬 부분을 원격과 연동된 로컬 깃의 파일에 그대로 적용해줍니다. 

      2. 해당 디렉토리에서 shell을 열어 다음 명령어를 쳐 줍니다.

         ```terminal
         bundle exec jekyll serve (--incremental)
         ```

         --incremental 태그의 경우는 수정된 사항만 추가로 랜더링하는 식으로 실행되도록 하는 태그로 알고 있습니다.

      3. 이후 커맨드라인으로 실시간 수정이 반영됨을 알 수 있습니다. 로컬 블로그는 <http://localhost:4000> 으로 접속이 가능합니다.
         - VSCode 아래의 커맨드에서 md 파일을 수정할(정확히는 `Ctrl + S`를 누를)때 마다 로컬 블로그에 반영됨을 알 수 있습니다. 스플릿 스크린으로 Markdown으로 렌더링 되는 게시글을 확인할 수 있지만, Liquid, 일부 태그 등이 먹히지 않고, 랜더링 방식이 다르기에 실제 블로그에서 보여질 것과는 차이가 있을 수 있습니다. 이 때 이런 방법을 이용하시면 약 20초(다소 긴 시간인데 --incremental 태그를 넣지 않아서 그런 것 같네요) 정도의 딜레이를 두고 현재 글이 올라가면 블로그에서 어떻게 보일지를 알 수 있습니다.

<figure>
<img src="{{ '/assets/images/blog-setup/realtime-check.png' | relative_url }}" alt="real-time check" width="960" height="523">
</figure>  

[^structure]: [**파일구조** 페이지]({{ "/blog/structure/" | relative_url }})에서 상세한 테마의 파일구조를 이해할 수 있습니다.

**GitHub Pages 대체제:** _(직역되었습니다)_ Github Pages의 대체제가 필요하다면 [Netlify][netlify-jekyll], [GitLab Pages][gitlab-jekyll], [Continuous Integration (CI) services][ci-jekyll] 또한 사용 가능합니다.대부분의 경우는 그저 리포지토리를 연결하는 작업과 configuration 파일을 조금 건드리고 앞서 설명한 [로컬 설치 방법](#로컬---기반-환경-설치) 을 따라가 면 됩니다.
{: .notice--info}

[netlify-jekyll]: https://www.netlify.com/blog/2015/10/28/a-step-by-step-guide-jekyll-3.0-on-netlify/
[gitlab-jekyll]: https://about.gitlab.com/2016/04/07/gitlab-pages-setup/
[ci-jekyll]: https://jekyllrb.com/docs/deployment/automated/#continuous-integration-service

### 불필요한 디렉토리 삭제하기

`minimal-mistakes-jekyll` 레포지토리를 포크하였거나 다운로드 한경우 다음 리포지토리와 파일을 삭제해도 무관합니다:

- `.editorconfig`
- `.gitattributes`
- `.github`
- `/docs`
- `/test`
- `CHANGELOG.md`
- `minimal-mistakes-jekyll.gemspec`
- `README.md`
- `screenshot-layouts.png`
- `screenshot.png`

## 사이트 설정하기

여기 까지 진행하면, <http://USERNAME.github.io>에는 기본 MMistakes 테마의 사이트가 올라가 있을 겁니다. 이 사이트를 내 입맛에 맞게 수정하는 작업을 수행합니다. 이 글에서는 간략하게만 다루고, 자세한 내용들은 세부 페이지에 설명해두도록 하겠습니다.

### 원격 - 초기 설정

[기본 `_config.yml`](https://github.com/mmistakes/minimal-mistakes/blob/master/_config.yml) 파일을 한번 수정해 보세요. YAML형식의 설정 파일 규격을 따르고 있으니, 블로그 이름과 제목, '나'에 대한 소개 등부터 블로그 전체에 대한 설정이 담긴 파일입니다.

```yaml
   # Site Settings
   locale                   : "ko-KR"
   title                    : "Celenort"
   title_separator          : "::"
   subtitle                 : "Impromptu"
   # site tagline that appears below site title in masthead
   name                     : "Celenort"
   description              : "Ex impromptu ad memoriam"
   url                      : "https://celenort.github.io" 
   # the base hostname & protocol for your site 
   # e.g. "https://mmistakes.github.io"
   baseurl                  : 
   # the subpath of your site, e.g. "/blog"
   repository               : "Celenort/celenort.github.io" 
   # GitHub username/repo-name e.g. "mmistakes/minimal-mistakes"
   teaser                   : 
   # path of fallback teaser image, e.g. "/assets/images/500x300.png"
   logo                     : "/assets/images/sos.png" 
   # path of logo image to display in the masthead, e.g. "/assets/images/88x88.png"
```

대충 위처럼 설정할 수 있습니다.

[**설정**]({{ "/blog/configuration/" | relative_url }}) 부분에서 더 자세하게 다루도록 하겠습니다.

다음 파일들을 수정하여 번역된 메시지 / Navigation (상단바)를 수정할 수 있습니다.

- [`_data/ui-text.yml`][ui-text.yml] - UI text ([클릭]({{ "/blog/ui-text/" | relative_url }}))
- [`_data/navigation.yml`][navigation.yml] - navigation ([클릭]({{ "/blog/navigation/" | relative_url }}))

  [ui-text.yml]: https://github.com/mmistakes/minimal-mistakes/blob/master/_data/ui-text.yml
  [navigation.yml]: https://github.com/mmistakes/minimal-mistakes/blob/master/_data/navigation.yml

### 로컬 -  `jekyll new` 에서 시작

_(이쪽으로는 해볼 일이 없어 직역만 했습니다)_

`jekyll new` 명령어로 만들어진 사이트는 몇가지 파일의 내용을 수정해야 합니다.

먼저 입맛에 맞게 `_config.yml`를 바꾼 후에,

`<site root>/index.md` 를 [Minimal Mistakes `index.html`](https://github.com/mmistakes/minimal-mistakes/blob/master/index.html)로 교체해 줍니다. [`home` layout]({{ "/blog/layouts/#home-page" | relative_url }})을 사용한다면 pagination이 enabled 되어 있는지 확인합니다. 이는  **_config.yml**에서 활성화 가능합니다.
- `_posts/0000-00-00-welcome-to-jekyll.markdown` 의 `layout: post` 를 `layout: single`로 변경해 줍니다.
- `about.md`를 삭제하거나, `layout: page` 를 `layout: single` 로 바꾸고 `icon-github.html` 참조를 없애줍니다.
